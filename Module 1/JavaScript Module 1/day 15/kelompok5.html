<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exercise</title>
</head>

<body></body>
<script>
    class Keranjang {
        constructor(produk, qty, harga) {
            this.produk = produk;
            this.qty = qty;
            this.harga = harga;
        }
    }

    let belanja = [
        { produk: 'Kemeja Pria', stock: 10, harga: 120000 },
        { produk: 'Celana Jeans Pria', stock: 5, harga: 200000 },
        { produk: 'Kaos Polos', stock: 5, harga: 75000 }
    ];

    let tampilanBelanja = '';

    belanja.forEach((val, index) => {
        tampilanBelanja +=
            index +
            1 +
            '. ' +
            val.produk +
            ' Stock ' +
            val.stock +
            ' Rp.@' +
            val.harga.toLocaleString('id-ID') +
            '\n';
    });
    console.log(tampilanBelanja);

    let keranjang = [];
    let menu = 0;

    while (menu != 3) {
        menu = prompt(`
1. menu
2. keranjang
3. exit`);


        if (menu == '1') {
            let opt = parseInt(prompt(tampilanBelanja));
            if (opt > 0 && opt < tampilanBelanja.length) {
                let item = belanja[opt - 1];
                let qty = parseInt(prompt('Mau beli berapa banyak?'));
                console.log(item);
                qty > item.stock || qty < 0
                    ? alert('input tidak tepat')
                    : keranjang.push(new Keranjang(item.produk, qty, item.harga));
            }
        } else if (menu == 2) {
            barang = [];
            for (let i = 0; i < keranjang.length; i++) {
                barang = barang + (i + 1) + ". " + keranjang[i].produk + " Quantity " + keranjang[i].qty + " Harga " + keranjang[i].harga + " Total Harga " + keranjang[i].harga * keranjang[i].qty + "\n";
            }
            menu = confirm(barang);
            let opsiKerangjang = prompt(`
      1. Check Out
      2. Edit
      3. Back
      `)
            if (opsiKerangjang == 1) {
                let sum = keranjang.reduce((a, b) => {
                    b = b.qty * b.harga
                    return (a += b)
                }, 0);
                let pembayaran = prompt(`Lakukan pembayaran sejumlah Rp.${sum.toLocaleString('id-ID')},00`)
                if (pembayaran == sum) {
                    confirm(`Terimakasi sudah melakukan pembayaran`)
                    keranjang = []
                } else if (pembayaran < sum) {
                    let kurangnya = sum - pembayaran
                    let kurang = prompt(`Pembayaran anda kurang Rp.${kurangnya.toLocaleString(`id-ID`)},00`)
                    if (kurang == kurangnya) {
                        confirm(`Terimakasi sudah melakukan pembayaran`)
                    } else if (kurang < kurangnya) {
                        let kurangnya = sum - pembayaran
                        let kurang = prompt(`Pembayaran anda kurang Rp.${kurangnya.toLocaleString(`id-ID`)},00`)
                    } else if (kurang > kurangnya) {
                        let lebihnya = pembayaran - sum
                        confirm(`Pembayaran anda lebih Rp.${lebihnya.toLocaleString(`id-ID`)},00 akan dikembalikan ke akun anda`)
                        keranjang = []
                    }
                } else if (pembayaran > sum) {
                    let lebihnya = pembayaran - sum
                    confirm(`Pembayaran anda lebih Rp.${lebihnya.toLocaleString(`id-ID`)},00 akan dikembalikan ke akun anda`)
                    keranjang = []
                }
            } else if (opsiKerangjang == 2) {
                let input = parseInt(prompt(`${barang}
        input nomer barang untuk mengedit`))
                input
            }
        }
        else if (menu == 3) {
            alert('terima kasih sudah berkunjung');
        } else {
            alert('menu belum dibuat');
        }

















    }




</script>

</html>